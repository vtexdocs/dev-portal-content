---
title: "Understanding Delivery Promise operation"
updatedAt: "2025-09-03T15:35:51.192Z"
---

>ℹ This feature is in closed beta, meaning only selected customers can access it. If you're interested in implementing it, please contact our [Support](https://support.vtex.com/hc/en-us) team.

This guide explains how Delivery Promise operates, covering:

* [Hooks](#hooks): Discover the hooks used to manage user location, fulfillment options, and Delivery Promise workflows.
* [Filter options](#filter-options): Learn how shoppers can filter products by delivery or pickup methods.
* [Location priority](#location-priority): Understand the order and logic used to determine the shopper's location for accurate delivery estimates.

>⚠️ To learn how to implement Delivery Promise in your store, see the guide [Implementing Delivery Promise](https://developers.vtex.com/docs/guides/faststore/delivery-promise-implementation).

## Hooks

This feature introduces the following hooks as part of the regionalization and location workflow:

* `useGeoLocation`: Uses the browser's geolocation API or other client-side methods to auto-detect the user's location when not provided.
* `useRegion`: Accesses or updates the user's region information, such as postal code or location, and manages region validation flows.
* `useRegionModal`: Handles modal display logic for region selection, especially when the location input is mandatory.
* `useDeliveryPromise`: Manages all logic for querying, displaying, and updating delivery availability filters and states.

## Filter options

Delivery Promise offers shoppers two product filtering options:
- [Global filters](#global-filters): Apply to all store navigation.
- [Product List Page (PLP) or search page](#plp-or-search-page-filters): Apply only to the current page the shopper is viewing.

>ℹ Learn more about filter usage and user flows in the [Delivery Promise Figma Community](https://www.figma.com/community/file/1545494767147168145/delivery-promise-by-vtex) page.


### Global filters

Global filters remain active across all user navigation and are applied to all product searches until they change or are cleared.

Shoppers can filter available products globally using the **Filter by store**, which displays only products available for pickup at a specific store. This filter shows all available pickup points within a 50 km pickup radius configured in Checkout. The number of pickup points displayed is unlimited.

![filter-by-store](https://vtexhelp.vtexassets.com/assets/docs/src/by-store___745e8c3ae10a84e55f88b107e5b00218.png)

### PLP or search page filters

In PLPs or search pages, the shopper may have the following options to filter:

* **Deliver to:** Displays available products according to the shopper's location.
* **Pickup at:** Displays the store set in the global pickup point filter, or the one closest to the shopper's location. To change the store set in `Pickup at {storeName}`, the shopper can click it and select a new store in the modal that opens. It shows all available pickup points within a 50 km pickup radius configured in Checkout. The number of pickup points displayed is unlimited.
* **Pickup nearby:** Displays products available for pickup at nearby stores. It shows up to 40 pickup points within 10 km of the shopper's location.
* **Pickup anywhere:** Displays products available for pickup at any participating store within the merchant's network, rather than restricting results to a selected pickup location or geographic proximity. **It's mainly used by B2B stores**.

![plp-filters](https://vtexhelp.vtexassets.com/assets/docs/src/plp-by-shipping___e9ba4d4e3f0840c3ec53dc94ac7aafc4.png)

## Understanding location priority

To provide accurate Delivery Promise estimates, FastStore projects determine user location based on the following priority:

1. **Logged-in user's address:** If the user is logged in and has a saved address, this information is used.
2. **User-provided location:** If the user is logged in but doesn't have a saved address, or isn't logged in but provides their location, like a postal code, this data is used.
3. **Default postal code:** If the user hasn't provided a location, isn't logged in, or has no saved address, we check if the merchant has configured a default postal code for all buyers. Learn to do so in [Defining a default postal code](#step-4-optional-defining-a-default-postal-code).
4. **No postal code (not required):** If no postal code is provided and not required, products are displayed without using Delivery Promise.
5. **No postal code (required):** If no postal code is provided when required, a modal is displayed that the buyer can't close until a postal code is entered. To make the postal code required, open your `discovery.config.js` file and change the `mandatory` field in the `deliveryPromise` object to `true`, as shown in the [Default settings](#default-settings) section.

To better understand how this flow works, see the following diagram:

```mermaid
graph LR
    S{"Is the user logged in?"} -- Yes --> C{"Logged-in user's address available?"}
    S -- No --> A{"Location provided?"}

    C -- Yes --> D(["Use the logged-in user's address"])
    C -- No --> A

    A -- Yes --> B(["Use the provided location"])
    A -- No --> E{"Default postal code configured?"}

    E -- Yes --> F(["Use the default postal code"])
    E -- No --> H{"Postal code mandatory?"}

    H -- Yes --> K(["Display mandatory postal code modal"])
    K --> L["User inputs postal code"]
    L --> M(["Use the provided postal code"])

    H -- No --> N(["Display products without using Delivery Promise"])
```


