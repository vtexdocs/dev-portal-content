---
title: '1. Configuring external DNS'
---

In this guide, you will learn how to configure external domains for your **FastStore** and **VTEX** website. The process involves the following steps:

   - Setting up your external DNS provider to point your custom domain to your VTEX website. Custom domains can be purchased from any **domain registration platform**.
   - Configuring your custom domains in **VTEX Account Settings**.
   - Associating your custom domains with your **FastStore** project.

Besides making your FastStore website accessible via a custom domain, **VTEX Checkout** will also be operational as soon as you complete this guide. You'll then be ready to continue configuring other VTEX solutions, such as **Order Placed**, **Login**, and **My Account**.

## Before you begin

   - Develop your FastStore project by following the [Getting Started track](https://developers.vtex.com/docs/guides/faststore/getting-started-overview).
   - Deploy your FastStore project.
   - Buy the desired domain.
   - [Redirect the **root domain** to the `www` subdomain.](https://help.vtex.com/en/tutorial/configuring-access-without-www--tutorials_4278#root-domain-redirect-without-www)

## Instructions

> ⚠️ If you still need to configure other VTEX solutions, please **use a fictitious domain name** while taking the following steps. Once you have set up all the desired integrations, repeat this guide using your final domain to make your website publicly available to end-users.

### Step 1 - Creating DNS records

1. Access your domain provider's website.
2. Create a **CNAME** DNS record for your `www` domain (e.g., `www.mystore.com`) that points to `www.{rootDomain}.cdn.vtex.com` (e.g., `www.mystore.com.cdn.vtex.com`). Check your domain provider's documentation for more information.
3. Now, create a **CNAME** record for the `secure` subdomain (e.g., `secure.mystore.com`) that points to `secure.{rootDomain}.cdn.vtex.com` (e.g., `secure.mystore.com.cdn.vtex.com`). This subdomain will be used by the **Checkout**, **Order Placed**, **Login**, and **My Account** pages.

> ℹ️ Please note that the configured addresses may not be immediately available to everyone due to DNS propagation, which can take 24-48 hours to complete.

### Step 2 - Putting your account into production

To proceed, make sure your store is active and in production, to do this, follow the steps in the article [Putting your account into production](https://help.vtex.com/en/tracks/go-live-your-store--4Ns5FxIiksmjsdX2yOTduM/7wFsbWgN4rnZsbjhv8IItX#putting-your-account-into-production).

### Step 3 - Configuring domains in VTEX Account Settings

Now, you must set up your VTEX account to use the DNS records created in the previous step.

> ℹ For more information about store domain configuration, see the [Configuring the store domain](https://help.vtex.com/en/tutorial/configuring-the-store-domain--tutorials_2450) guide.

1. On VTEX Admin, click your profile avatar, which can be identified by the first letter of your email address.
2. Access **Account Settings > Account**.
3. Go to the **Stores** tab and in the **Hosts** table, click the menu (**⋮**) and choose **Edit**.
4. In the **Hosts** field, enter your main domain (e.g., `www.mystore.com`) to the list.
5. Click `Add`.
6. Add the `secure` subdomain (e.g., `secure.mystore.com`) to the list.
   ![host-configuration](https://vtexhelp.vtexassets.com/assets/docs/src/account-settings-new___2e13bee3041e8505922a737b94652ca6.png)
7. Add the root domain as well; e.g., if your domain is `www.mystore.com`, add `mystore.com`. For a complete setup, you must add three hosts for each domain:
   - `www.mystore.com`  (store domain)
   - `mystore.com` (root domain)
   - `secure.mystore.com` (checkout/myaccount subdomain)

> ⚠️ To ensure a seamless checkout experience, all subdomains used by your store must be added to the host list. For more information, see the [Adding subdomains to the host list](#adding-subdomains-to-the-host-list) section.

8. Click the **Save** button.

### Step 4 - Associating your custom domain with your FastStore project

Back to your FastStore project, you must also configure your project to point to the right addresses and domains.

1. Open your FastStore project in any code editor of your preference.
2. Open the `discovery.config.js` file.
3. Update the `storeUrl`, `secureSubdomain`, `checkoutUrl`, `loginUrl`, and `accountUrl` properties as in the following:

   - **`storeUrl`**: `https://{subdomain}.{rootDomain}`
   - **`secureSubdomain`**: `https://{subdomain}.{rootDomain}`
   - **`checkoutUrl`**: `https://{subdomain}.{rootDomain}/checkout`
   - **`loginUrl`**: `https://{subdomain}.{rootDomain}/api/io/login`
   - **`accountUrl`**: `https://{subdomain}.{rootDomain}/api/io/account`

Take the following example of how this code block would look after configuring a store with the `www.mystore.com` domain and `secure` subdomain:

   ```diff /discovery.config.js
   ...
   
   // Default channel
   channel: '1',
   
   +  // Production URLs
   +  storeUrl: 'https://www.mystore.com',
   +  secureSubdomain: 'https://secure.mystore.com',
   +  checkoutUrl: 'https://secure.mystore.com/checkout',
   +  loginUrl: 'https://secure.mystore.com/api/io/login',
   +  accountUrl: 'https://secure.mystore.com/api/io/account',
   
   // Lighthouse CI
   lighthouse: {
   ...
   ```

4. Save your changes.
5. Open the `vtex.env` file.
6. Add the `SITE_HOST` key with the main domain specified in [Configuring domains in VTEX Account Settings](https://developers.vtex.com/docs/guides/faststore/go-live-1-configuring-external-dns#step-2---configuring-domains-in-vtex-account-management) as the value.

   ```diff /vtex.env
   + SITE_HOST=www.mystore.com
   ```

7. Save your changes.
8. Open a Pull Request, commit your changes, and deploy them to `main`.

> ⚠️ For stores with prefixed domains, add the `subDomainPrefix` property to `discovery.config.js` to ensure product visibility in the secured environment. For more information, see the [Adding `subDomainPrefix` for prefixed domains](#adding-subDomainPrefix-for-prefixed-domains) section. 

### Step 5 - Configuring the CDN workflow (Only for new go-lives)

If your FastStore website is going live for the first time, [open a ticket with VTEX Support](https://help.vtex.com/en/support) and specify that you need to configure the CDN workflow for the secure and main domains of your store.

Remember to include the following information in your ticket:

   - Your VTEX **account name**.
   - The **secure** and **main** domains of your store.

The VTEX team will evaluate your request and take the necessary actions to configure your account's CDN workflow.

## Configuring custom domain prefixes

To ensure your store operates efficiently, it's important to configure custom domain prefixes correctly for both checkout and secure product viewing. There are some scenarios where you need to configure custom domains prefixes:

- Stores with multiple subdomains: [Add all the subdomains to the host list](#adding-subdomains-to-the-host-list).
- Stores with prefixed domains: [Add `subDomainPrefix` for prefixed domains](#adding-subDomainPrefix-for-prefixed-domains).

### Adding subdomains to the host list

To ensure a seamless checkout experience, all subdomains used by your store must be added to the host list. If the store operates without the `www.` domain, you must include both the `www.` and non-`www.` domains in the hosts' list. 

Stores with custom prefixes, like `shop.mystore.com`, need both the prefix and main domain (`shop.mystore.com` and `mystore.com`) added. This guarantees that the checkout process works seamlessly when customers access the store with or without `www.` or any other custom prefix.

### Adding `subDomainPrefix` for prefixed domains

To ensure customers can view products in the secured environment on your store final domain, add the `subDomainPrefix` property to the [`dicovery.config.js`](https://developers.vtex.com/docs/guides/faststore/project-structure-overview#files) file. 
The `subDomainPrefix` property maintains compatibility between cookies set in the storefront and the secure environment.

To add the `subDomainPrefix` property, follow these steps:

1. Open your FastStore project in a code editor of your preference.
2. Open the `discovery.config.js` file.
3. Navigate to the `api` object and add the following:

   ```js
   // Platform specific configs for API
   api: {
    ...
    subDomainPrefix: ['xxx']
   },
   ```

   > ⚠ Replace `'xxx'` from `subDomainPrefix` property with the actual subdomain prefix (e.g., `['b2b']`). If you have multiple prefixes, add them as an array of strings (e.g., `['b2b', 'dev']`).

4. Save your changes.
5. Open a Pull Request, commit your changes, and deploy them to `main`.

## Related Resources

   - [Configuring the store domain](https://help.vtex.com/en/tutorial/configuring-the-store-domain--tutorials_2450)
   - [Setting up DNS pointing to VTEX](https://help.vtex.com/tracks/go-live-your-store--4Ns5FxIiksmjsdX2yOTduM/12bQlMbJ68Ot0LIaO6Btkj#setting-up-dns-pointing)
   - [Insert a reverse proxy in front of VTEX services](https://help.vtex.com/en/tutorial/insert-reverse-proxy-in-front-of-vtex-services--4PFWsfRAKviNVPf1bYdiir)