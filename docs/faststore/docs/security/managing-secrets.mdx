---
title: "Managing Secrets"
---

Secrets are sensitive information, such as API keys, passwords, and tokens, that must be securely managed during the FastStore project deployment process. [WebOps](https://developers.vtex.com/docs/guides/faststore/1-onboarding-overview) centralizes and standardizes secrets management, ensuring a consistent and secure process across all deployment providers.

This functionality leverages [AWS Secrets Manager](https://aws.amazon.com/pt/secrets-manager/) as a centralized repository for managing and retrieving secrets across all WebOps projects. As a result, secrets can be securely stored and accessed without embedding them directly within the project.

In this guide, you'll learn how to manage secrets in your FastStore project using [WebOps](https://developers.vtex.com/docs/guides/faststore/1-onboarding-overview).

## Secrets flow

The Secrets feature employs a structured method for interacting with deployment providers based on project-specific configurations. Below is an example of a successful flow that illustrates how WebOps determines the appropriate provider to use based on the project’s settings and then delegates the build and deployment process accordingly.

1. The user initiates a request to create, update, or delete a secret through the WebOps interface.
2. WebOps forwards the request made by the user (create, update, or delete a secret) to AWS Secrets Manager.
3. If AWS detects a conflict, it returns an error to WebOps.
4. When there is a conflict, WebOps notifies the user to retry the update. The user then resubmits the request, and WebOps tries again with AWS. If the error persists, open a ticket to [VTEX support](https://help.vtex.com/en/support).
5. Upon successful operation, the AWS Secrets Manager confirms the action with WebOps.
6. Once the secret management step is complete, WebOps identifies the cloud provider set for the project.

<details>
<summary>User request and secret storage</summary>

```mermaid
sequenceDiagram
  actor A1 as User
  participant WebOps as WebOps
  participant AWS as AWS Secrets Manager

  %% 1. User initiates secret creation/update/deletion
  A1 ->> WebOps: Request to create/update/delete secret

  %% 2. WebOps stores secret in AWS Secrets Manager
  WebOps ->> AWS: Store/Update/Delete secret

  alt Update Conflict Detected
    AWS -->> WebOps: Conflict/Error (update conflict)
    WebOps -->> A1: Prompt to retry update
    A1 ->> WebOps: Retry update request
    WebOps ->> AWS: Retry store/update secret
    AWS -->> WebOps: Confirm secret storage/update/deletion
  else No Conflict
    AWS -->> WebOps: Confirm secret storage/update/deletion
  end

  %% 3. WebOps determines which provider to use for build/deployment
  WebOps ->> WebOps: Identify cloud provider
```
</details>

### Secret propagation

<Tabs items={['Diagram', 'Flow details']} defaultIndex="0">
<Tab>
 ```mermaid
sequenceDiagram
  participant WebOps as WebOps
  participant AWS as AWS Secrets Manager
  participant Provider A as Provider A
  participant Provider B as Provider B
  participant Provider N as Provider N

 %% 4. Build flow with secrets propagation
  Note right of WebOps: Decision: Choose provider based on project configuration

  alt If Provider A
    WebOps ->> Provider A: Send build info
    Provider A ->> Provider A: Build and host application
    alt Build success
      Provider A -->> WebOps: Send build status (success)
    else Build failed
      Provider A -->> WebOps: Send build status and logs (error)
      Note right of WebOps: Error visible in Deploys tab
    end
  else If Provider B
    WebOps ->> Provider B: Send build info
    Provider B ->> Provider B: Build and host application
    alt Build success
      Provider B -->> WebOps: Send build status (success)
    else Build failed
      Provider B -->> WebOps: Send build status and logs (error)
      Note right of WebOps: Error visible in Deploys tab
    end
  else If Provider N
    WebOps ->> Provider N: Send build info
    Provider N ->> Provider N: Build and host application
    alt Build success
      Provider N -->> WebOps: Send build status (success)
    else Build failed
      Provider N -->> WebOps: Send build status and logs (error)
      Note right of WebOps: Error visible in Deploys tab
    end
  end
```
</Tab>
<Tab>
7. After secret management is completed successfully, WebOps identifies which cloud provider is set for the project.<be>8. WebOps sends the build information to the identified provider (Provider A, B, or N).<br>9. The selected provider is responsible for building and hosting the application. The building process follows this pattern:<br>&nbsp;&nbsp;a. The provider performs the build and deployment steps.<br>&nbsp;&nbsp;a. Upon completion, the provider communicates the build status back to WebOps. If it succeeds, the provider sends a `success` status to WebOps. If it fails, the provider returns the build status (error) and associated logs to WebOps.
</Tab>
</Tabs>

### Deployment feedback

10. When a build succeeds, the user receives a status notification on WebOps. 
11. When a build fails, the user is expected to check the [Deploys](https://developers.vtex.com/docs/guides/faststore/1-onboarding-dashboard#deploys) tab, where the build errors and associated logs are available for further investigation.

```mermaid
sequenceDiagram
  actor A1 as User
  participant WebOps as WebOps

  %% 5. Feedback to user
  alt Build successful
    WebOps -->> A1: Status notification
  else Build failed
    Note left of WebOps: No message is sent to the user. Check the Deploys tab for logs.
  end
```

## Instructions

To manage your secrets, access your [FastStore WebOps dashboard](https://developers.vtex.com/docs/guides/faststore/1-onboarding-dashboard) and navigate to the **Settings** tab.

In the [Secrets](https://developers.vtex.com/docs/guides/faststore/1-onboarding-dashboard#secrets) section, you can [create](#creating-secrets), [update](#updating-secrets), or [delete](#deleting-secrets) secrets following the steps below.

### Creating secrets

1. Input the related values in the `Key` and `Value` fields.
2. Click `Add`. You’ll see the message: `New Secret added successfully. Changes will take effect in the next successful deployment.`
3. Click on `Redeploy`. You’ll see the message: `Creating deployment…`, then `Deployment created successfully`.

### Updating secrets

1. Go to the `Current Keys` section.
2. Alongside the secret you need to update, click `⋮`, then click `Edit`.
3. Update the secret in the modal that will open.
4. Click `Update`. You’ll see the message: `Secret updated successfully. Changes will take effect in the next successful deployment.`
5. Click on `Redeploy`. You’ll see the message: `Creating deployment…`, then `Deployment created successfully`.

### Deleting secrets

1. Go to the `Current Keys` section.
2. Alongside the secret you need to update, click `⋮`, then click `Delete`.
3. Validate the secret you want to remove. 

   >⚠ This action can’t be undone.

4. Click `Delete secret`. You’ll see the message: `Secret deleted successfully. Changes will take effect in the next successful deployment.`
5. Click on `Redeploy`. You’ll see the message: `Creating deployment…`, then `Deployment created successfully`.

>ℹ Follow the deployment status in the [Deploys](https://developers.vtex.com/docs/guides/faststore/1-onboarding-dashboard#deploys) tab of the WebOps dashboard.
