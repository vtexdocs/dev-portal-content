---
title: "Managing a Customer Credit invoice"
slug: "managing-a-customer-credit-invoice"
hidden: false
createdAt: "2024-06-10T00:00:00.000Z"
updatedAt: ""
---
Customer Credit invoice is a document automatically generated by VTEX after the customer makes a purchase using Customer Credit as a payment method and the order is billed.

In cases of installment purchases, invoices are generated according to the number of installments. For example, a purchase made with payment in 10 installments on Customer Credit will generate 10 invoices related to the same order number.

> ⚠️ The Order invoice and the Customer Credit invoice are different documents. The Order invoice is issued for all purchases made in a store, regardless of the payment method selected.
> The Customer Credit invoice is additionally issued only for purchases made using the Customer Credit payment method. Learn more about invoiced orders in [How to invoice an order](https://help.vtex.com/en/tutorial/how-to-manually-invoice-an-order--7p1h852V5t54KyscpgxE2v).

![](https://raw.githubusercontent.com/vtexdocs/dev-portal-content/main/docs/guides/Integration-Guides/customer-credit-integration-guide/customer-credit-account_5.png)

This guide describes how to manage [Customer Credit](https://help.vtex.com/en/tutorial/customer-credit-overview--1uIqTjWxIIIEW0COMg4uE0) invoices in your store by performing the following actions through the endpoints of the [Customer Credit API](https://developers.vtex.com/docs/api-reference/customer-credit-api):

- Check information:

  - [About a specific Customer Credit invoice](#checking-customer-credit-invoice-details)
  - [Of all invoices issued to a Customer Credit account](#checking-invoice-details-on-a-customer-credit-account)
  - [Regarding Customer Credit invoices created for all users in a VTEX store](#checking-details-of-all-customer-credit-invoices-in-a-vtex-store)
- [Update invoice details](#updating-invoice-details-on-a-customer-credit-account)
- [Postpone the due date of an invoice](#postponing-the-due-date-of-a-customer-credit-invoice)
- [Record payment of an invoice](#confirming-payment-of-a-customer-credit-invoice)
- [Cancel an invoice](#cancelling-a-customer-credit-invoice)

> ℹ️ For more information about Customer Credit functionalities, access [Customer Credit - Overview](https://help.vtex.com/en/tutorial/customer-credit-overview--1uIqTjWxIIIEW0COMg4uE0) and [Customer Credit - Getting Started](https://help.vtex.com/en/tracks/customer-credit-getting-started--1hCRg21lXYy2seOKgqQ2CC/21ok0GBwmcIeaY2IukYMOg).

## Checking Customer Credit invoice details

When you want to check details about a specific Customer Credit invoice, you can use the [Retrieve invoice by ID](https://developers.vtex.com/docs/api-reference/customer-credit-api#get-/api/creditcontrol/accounts/-creditAccountId-/invoices/-invoiceId-) endpoint. In this request, you must send the [Customer Credit account](https://developers.vtex.com/docs/guides/managing-a-customer-credit-account) and invoice identification (`creditAccountId` and `invoiceId`) as path parameters.

See an example below using the account `11111111111_CPF` and invoice `7583E36F101C461094AB6CA68FA8EE2C-01`.

__GET - Retrieve invoice by ID__

`https://{accountName}.{environment}.com.br/api/creditcontrol/accounts/11111111111_CPF/invoices/7583E36F101C461094AB6CA68FA8EE2C-01`

Response body example

```json
{
    "id": "7583E36F101C461094AB6CA68FA8EE2C-01",
    "friendlyId": "IBjuAsrJ-1",
    "status": "Opened",
    "value": 9.63,
    "accountId": "11111111111_CPF",
    "creditValue": 0.0,
    "createdAt": "2024-03-03T06:52:53.1314379Z",
    "updatedAt": "2024-04-05T06:52:56.2329924Z",
    "originalDueDate": "2024-04-02T06:52:53.1314379Z",
    "dueDate": "2024-04-02T06:52:53.1314379Z",
    "installment": 1,
    "orderId": "1413870513134-01",
    "transactionId": "7583E36F101C461094AB6CA68FA8EE2C",
    "numberOfInstallments": 1,
    "creditAccountId": "11111111111_CPF"
}
```

> ℹ️ You can also check some details of a Customer Credit invoice details using the VTEX Admin. To do that, go to __Apps > Customer Credit > Invoices__, and click on the desired invoice.

## Checking invoice details on a Customer Credit account

To check details of all invoices issued on a customer credit account, you can use the [Retrieve invoices by customer credit account ID](https://developers.vtex.com/docs/api-reference/customer-credit-api#get-/api/creditcontrol/accounts/-creditAccountId-/invoices) endpoint. In this request, you must send the account identification (`creditAccountId`) as a path parameter.

See an example below using the account `111111111_CPF`:

__GET - Retrieve invoices by customer credit account ID__

`https://{accountName}.{environment}.com.br/api/creditcontrol/accounts/11111111111_CPF/invoices/`

Response body example

```json
{
    "data": [
        {
            "id": "ED01C38CD4C949C2BCDFDB2C461C80F1-01",
            "friendlyId": "MWKd4GUB-1",
            "status": "Paid",
            "value": 8.01,
            "accountId": "11111111111_CPF",
            "creditValue": 0.0,
            "createdAt": "2024-02-26T14:39:54.6205024Z",
            "resolvedAt": "2024-02-26T14:47:15.8495716Z",
            "updatedAt": "2024-02-26T14:47:15.8964469Z",
            "originalDueDate": "2024-03-27T14:39:54.6205024Z",
            "dueDate": "2024-03-27T14:39:54.6205024Z",
            "installment": 1,
            "orderId": "1413590513132-01",
            "transactionId": "ED01C38CD4C949C2BCDFDB2C461C80F1",
            "numberOfInstallments": 1,
            "creditAccountId": "11111111111_CPF"
        },
        {
            "id": "7583E36F101C461094AB6CA68FA8EE2C-01",
            "friendlyId": "IBjuAsrJ-1",
            "status": "Opened",
            "value": 9.63,
            "accountId": "11111111111_CPF",
            "creditValue": 0.0,
            "createdAt": "2024-03-03T06:52:53.1314379Z",
            "updatedAt": "2024-04-05T06:52:56.2329924Z",
            "originalDueDate": "2024-04-02T06:52:53.1314379Z",
            "dueDate": "2024-04-02T06:52:53.1314379Z",
            "installment": 1,
            "orderId": "1413870513134-01",
            "transactionId": "7583E36F101C461094AB6CA68FA8EE2C",
            "numberOfInstallments": 1,
            "creditAccountId": "11111111111_CPF"
        }
    ],
    "summary": {
        "total": 9.63,
        "count": 2,
        "totalPaid": 8.01,
        "totalCancelled": 0.0
    }
}
```

> ℹ️ You can also use VTEX Admin to check the list of all invoices issued to a customer credit account. To do that, go to __Apps > Customer Credit > Accounts__, and click on the desired invoice.

## Checking details of all Customer Credit invoices in a VTEX store

To list all invoices created in Customer Credit accounts of a VTEX store, you can use the [Search all invoices](https://developers.vtex.com/docs/api-reference/customer-credit-api#get-/api/creditcontrol/invoices) endpoint.

__GET - Search all invoices__

`https://{accountName}.{environment}.com.br/api/creditcontrol/invoices/`

Response body example

```json
{
    "data": [
        {
            "id": "8C7A5F6F57AE4464B3D1F15A0E47C536-01",
            "status": "Opened",
            "value": 15.0,
            "accountId": "09173503401_CPF",
            "creditValue": 0.0,
            "createdAt": "2018-10-24T15:34:14.5879054Z",
            "updatedAt": "2018-10-24T15:34:14.6503743Z",
            "originalDueDate": "2018-11-23T15:34:14.5879054Z",
            "dueDate": "2018-11-23T15:34:14.5879054Z",
            "installment": 1,
            "orderId": "500001",
            "transactionId": "8C7A5F6F57AE4464B3D1F15A0E47C536",
            "creditAccountId": "09173503401_CPF"
        },
        {
            "id": "8C7A5F6F57AE4464B3D1F15A0E47C536-01",
            "status": "Paid",
            "value": 15.0,
            "accountId": "09173503401_CPF",
            "creditValue": 0.0,
            "createdAt": "2018-10-24T15:34:14.5879054Z",
            "resolvedAt": "2021-03-05T15:01:23.0768211Z",
            "updatedAt": "2021-03-05T15:01:23.1236966Z",
            "originalDueDate": "2018-11-23T15:34:14.5879054Z",
            "dueDate": "2018-11-23T15:34:14.5879054Z",
            "installment": 1,
            "orderId": "500001",
            "transactionId": "8C7A5F6F57AE4464B3D1F15A0E47C536",
            "creditAccountId": "09173503401_CPF"
        },
        {
            "id": "A69BD96CDA1F402B939913B81C6346B2-01",
            "status": "Opened",
            "value": 35.0,
            "accountId": "09173503401_CPF",
            "creditValue": 0.0,
            "createdAt": "2018-10-25T01:01:07.3570738Z",
            "updatedAt": "2018-10-25T01:01:07.5133444Z",
            "originalDueDate": "2018-11-24T01:01:07.3570738Z",
            "dueDate": "2018-11-24T01:01:07.3570738Z",
            "installment": 1,
            "orderId": "500004",
            "transactionId": "A69BD96CDA1F402B939913B81C6346B2",
            "creditAccountId": "09173503401_CPF"
        }
………
    ],
    "summary": {
        "total": 2388.95,
        "count": 121,
        "totalPaid": 1379.11,
        "totalCancelled": 1.24
    }
}
```

## Updating invoice details on a Customer Credit account

Through the [Change invoice](https://developers.vtex.com/docs/api-reference/customer-credit-api#put-/api/creditcontrol/accounts/-creditAccountId-/invoices/-invoiceId-) endpoint, you can update an invoice status, create an observation note, or add a link to assist your customer in the payment process.

See the example below, modifying the status, creating a observation note and adding the payment link to the invoice `7583E36F101C461094AB6CA68FA8EE2C-01` of account `111111111_CPF`:

__PUT - Change invoice__

`https://{accountName}.{environment}.com.br/api/creditcontrol/accounts/11111111111_CPF/invoices/7583E36F101C461094AB6CA68FA8EE2C-01`

Request body example

```json
{
  "status": "Paid",
  "observation": "BF 2024 customer invoice.",
  "paymentLink": "https://paymentlink.com"
}
```

> ⚠️ The success of this call is confirmed by the __200 OK__ status and the empty response body.

To confirm the information was updated, use the [Retrieve invoice by ID](https://developers.vtex.com/docs/api-reference/customer-credit-api#get-/api/creditcontrol/accounts/-creditAccountId-/invoices/-invoiceId-) endpoint.

Response body example

```json
{
    "id": "7583E36F101C461094AB6CA68FA8EE2C-01",
    "friendlyId": "IBjuAsrJ-1",
    "status": "Paid",
    "value": 9.63,
    "accountId": "11111111111_CPF",
    "creditValue": 0.0,
    "createdAt": "2024-03-03T06:52:53.1314379Z",
    "resolvedAt": "2024-05-08T18:43:14.7046593Z",
    "updatedAt": "2024-05-08T18:43:14.8765325Z",
    "paymentLink": "https://www.paymentlink.com",
    "originalDueDate": "2024-04-02T06:52:53.1314379Z",
    "dueDate": "2024-04-02T06:52:53.1314379Z",
    "installment": 1,
    "orderId": "1413870513134-01",
    "observation": "BF 2024 customer invoice.",
    "transactionId": "7583E36F101C461094AB6CA68FA8EE2C",
    "numberOfInstallments": 1,
    "creditAccountId": "11111111111_CPF"
}
```

You can also access your store Admin (__Apps > Customer Credit > Account Details__), select the desired account and invoice to confirm that the information was updated.

![](https://raw.githubusercontent.com/vtexdocs/dev-portal-content/main/docs/guides/Integration-Guides/customer-credit-integration-guide/customer-credit-account_6.png)

## Postponing the due date of a Customer Credit invoice

To change the original due date of an invoice in Customer Credit, allowing the customer more time to complete the payment, you can use the endpoint [Postpone an invoice](https://developers.vtex.com/docs/api-reference/customer-credit-api#put-/api/creditcontrol/accounts/-creditAccountId-/invoices/-invoiceId-/postponement).

However, before defining how many additional days of payment you will provide to the customer, you need to enable the option to postpone payment in your store's settings. To do this, you must use the endpoint [Create or change store configuration](https://developers.vtex.com/docs/api-reference/customer-credit-api#put-/api/creditcontrol/storeconfig).

The following parameters of this endpoint are responsible for enabling the option to postpone payment of invoices in the store:

- `invoicePostponementLimit`: The maximum number of times allowed to extend an invoice.
- `maxPostponementDays`: The maximum number of days an invoice can be extended.
- `postponementEnabled`: Allow extension of invoices in the store.

> ⚠️ The settings available in the [Create or change store configuration](https://developers.vtex.com/docs/api-reference/customer-credit-api#put-/api/creditcontrol/storeconfig) endpoint apply to all Customer Credit accounts registered in a VTEX store. It is not possible to customize these settings for each specific Customer Credit account of a given store.

See the example below, where a store is configured to allow invoice expiration dates to be extended up to 3 times and for a maximum period of 30 days in total.

__PUT - Create or change store configuration__

`https://{accountName}.{environment}.com.br/api/creditcontrol/storeconfig`

Request body example

```json
{
    "invoicePostponementLimit": 3,
    "maxPostponementDays": 30,
    "postponementEnabled": true
}
```

The response to this request provides updated information about postponing invoices and other settings already applied in the store.

Response body example

```json
{
    "dailyInterestRate": 0.01,
    "invoicePostponementLimit": 3,
    "taxRate": 0.4,
    "maxPostponementDays": 30,
    "defaultCreditValue": 150,
    "maxPreAuthorizationGrowthRate": 0.1,
    "myCreditsEnabled": true,
    "toleranceEnabled": true,
    "automaticCheckingAccountCreationEnabled": true,
    "postponementEnabled": true,
    "notificationsSettings": {
        "daysPrior": [
            {
                "days": 1,
                "timeOfDay": "16:00:00"
            }
        ],
        "daysAfter": [
            {
                "days": 0,
                "timeOfDay": "12:00:00"
            }
        ]
    }
}
```

> ℹ️ For more information about other configuration fields available for Customer Credit in a store, access the [Create or change store configuration](https://developers.vtex.com/docs/api-reference/customer-credit-api#put-/api/creditcontrol/storeconfig) endpoint reference.

Once invoice postponement is enabled, you can postpone a specific invoice. See the example below in which 5 additional days will be granted to pay an invoice with an original due date of May 20, 2024.

__PUT - Postpone an invoice__

`https://{accountName}.{environment}.com.br/api/creditcontrol/accounts/11111111111_CPF/invoices/7583E36F101C461094AB6CA68FA8EE2C-01/postponement`

Request body example

```json
{
    "dueDays": 5
}
```

> ⚠️ The success of this call is confirmed by the __200 OK__ status and the empty response body.

To confirm that the new invoice due date has been modified, use the [Retrieve invoice by ID](https://developers.vtex.com/docs/api-reference/customer-credit-api#get-/api/creditcontrol/accounts/-creditAccountId-/invoices/-invoiceId-) endpoint and check the updated information in the `dueDate` field.

__GET - Retrieve invoice by ID__

`https://{accountName}.{environment}.com.br/api/creditcontrol/accounts/11111111111_CPF/invoices/7583E36F101C461094AB6CA68FA8EE2C-01`

Response body example

```json
{
    "id": "7583E36F101C461094AB6CA68FA8EE2C-01",
    "friendlyId": "IBjuAsrJ-1",
    "status": "Opened",
    "value": 9.63,
    "accountId": "11111111111_CPF",
    "creditValue": 0.0,
    "createdAt": "2024-03-03T06:52:53.1314379Z",
    "updatedAt": "2024-04-05T06:52:56.2329924Z",
    "originalDueDate": "2024-05-20T06:52:53.1314379Z",
    "dueDate": "2024-05-25T06:52:53.1314379Z",
    "installment": 1,
    "orderId": "1413870513134-01",
    "transactionId": "7583E36F101C461094AB6CA68FA8EE2C",
    "numberOfInstallments": 1,
    "creditAccountId": "11111111111_CPF"
}
```

You can also verify the new invoice due date through your store Admin (__Apps > Customer Credit > Account Details__).

![](https://raw.githubusercontent.com/vtexdocs/dev-portal-content/main/docs/guides/Integration-Guides/customer-credit-integration-guide/customer-credit-account_7.png)

## Confirming payment of a Customer Credit invoice

To confirm payment of a customer credit invoice, you can use the [Mark an invoice as paid](https://developers.vtex.com/docs/api-reference/customer-credit-api#post-/api/creditcontrol/accounts/-creditAccountId-/invoices/-invoiceId-/payments) endpoint.

See example of payment of invoice `7583E36F101C461094AB6CA68FA8EE2C-01` in account `111111111_CPF`:

__POST - Mark an invoice as paid__

`https://{accountName}.{environment}.com.br/api/creditcontrol/accounts/11111111111_CPF/invoices/7583E36F101C461094AB6CA68FA8EE2C-01/payments`

Response body example

```json
{
    "id": "7583E36F101C461094AB6CA68FA8EE2C-01",
    "friendlyId": "IBjuAsrJ-1",
    "status": "Paid",
    "value": 9.63,
    "accountId": "11111111111_CPF",
    "creditValue": 0.0,
    "createdAt": "2024-03-03T06:52:53.1314379Z",
    "resolvedAt": "2024-05-08T18:43:14.7046593Z",
    "updatedAt": "2024-05-08T18:43:14.8765325Z",
    "paymentLink": "https://www.paymentlink.com",
    "originalDueDate": "2024-04-02T06:52:53.1314379Z",
    "dueDate": "2024-04-02T06:52:53.1314379Z",
    "installment": 1,
    "orderId": "1413870513134-01",
    "observation": "BF 2024 customer invoice.",
    "transactionId": "7583E36F101C461094AB6CA68FA8EE2C",
    "numberOfInstallments": 1,
    "creditAccountId": "11111111111_CPF"
}
```

You can also confirm the invoice payment through your store Admin (__Apps > Customer Credit > Account Details__).

![](https://raw.githubusercontent.com/vtexdocs/dev-portal-content/main/docs/guides/Integration-Guides/customer-credit-integration-guide/customer-credit-account_8.png)

## Cancelling a Customer Credit invoice

If you wish to cancel a Customer Credit invoice that has been issued but no longer needs to be paid, for example when an order is cancelled, you can use the [Cancel invoice](https://developers.vtex.com/docs/api-reference/customer-credit-api#delete-/api/creditcontrol/accounts/-creditAccountId-/invoices/-invoiceId-) endpoint.

> ⚠️ An invoice that already has a paid status can no longer be canceled.

See an example of canceling the invoice `7583E36F101C461094AB6CA68FA8EE2C-01` on account `111111111_CPF`:

__DEL - Cancel invoice__

`https://{accountName}.{environment}.com.br/api/creditcontrol/accounts/11111111111_CPF/invoices/7583E36F101C461094AB6CA68FA8EE2C-01`

> ⚠️ The success of this call is confirmed by the __200 OK__ status and the empty response body.

To confirm the invoice was canceled, use the [Retrieve invoice by ID](https://developers.vtex.com/docs/api-reference/customer-credit-api#get-/api/creditcontrol/accounts/-creditAccountId-/invoices/-invoiceId-) endpoint.

Response body example

```json
{
    "id": "7583E36F101C461094AB6CA68FA8EE2C-01",
    "friendlyId": "IBjuAsrJ-1",
    "status": "Cancelled",
    "value": 9.63,
    "accountId": "11111111111_CPF",
    "creditValue": 0.0,
    "createdAt": "2024-03-03T06:52:53.1314379Z",
    "resolvedAt": "2024-05-08T18:43:14.7046593Z",
    "updatedAt": "2024-05-08T18:43:14.8765325Z",
    "paymentLink": "https://www.paymentlink.com",
    "originalDueDate": "2024-04-02T06:52:53.1314379Z",
    "dueDate": "2024-04-02T06:52:53.1314379Z",
    "installment": 1,
    "orderId": "1413870513134-01",
    "observation": "BF 2024 customer invoice.",
    "transactionId": "7583E36F101C461094AB6CA68FA8EE2C",
    "numberOfInstallments": 1,
    "creditAccountId": "11111111111_CPF"
}
```

You can also confirm the invoice cancellation through your store Admin (__Apps > Customer Credit > Account Details__).

![](https://raw.githubusercontent.com/vtexdocs/dev-portal-content/main/docs/guides/Integration-Guides/customer-credit-integration-guide/customer-credit-account_9.png)
